<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

</head>
<body class="property-detail-page" style="background:#f7f9fb;color:#1f2937;">
  {{> __newnav}}

  <style>
    .hero-wrap {
      padding: 2rem 0 3rem;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
    }

    .hero-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      align-items: start; /* keep right column aligned to top */
    }

    .hero-info { align-self: start; }

    .hero-gallery {
      border-radius: 24px;
      background: #ffffff;
      padding: 0.75rem 0.75rem 1.25rem;
      box-shadow: 0 22px 45px rgba(15, 23, 42, 0.1);
      border: 1px solid #e2e8f0;
    }

    .hero-gallery .carousel-item img {
      border-radius: 18px;
      width: 100%;
      max-height: 420px;
      object-fit: cover;
    }

    .hero-thumbs {
      display: flex;
      gap: 0.35rem;
      flex-wrap: wrap;
      margin-top: 0.85rem;
    }

    .hero-thumbs img {
      width: 72px;
      height: 72px;
      border-radius: 14px;
      object-fit: cover;
      border: 1px solid #e2e8f0;
      cursor: pointer;
      transition: transform .15s ease;
    }

    .hero-thumbs img:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.15);
    }

    .hero-info h1 {
      font-size: clamp(1.8rem, 3vw, 2.6rem);
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .hero-pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-top: 1.5rem;
    }

    .hero-pill {
      border-radius: 999px;
      border: 1px solid rgba(15, 23, 42, 0.12);
      padding: 0.45rem 1rem;
      font-size: 0.9rem;
      background: #f9fafb;
    }

    .property-body {
      margin-top: -40px;
      padding-bottom: 4rem;
    }

    .property-card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 20px;
      padding: 1.75rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 16px 30px rgba(15, 23, 42, 0.06);
    }

    .property-card h3 {
      text-transform: uppercase;
      letter-spacing: 0.15rem;
      font-size: 0.95rem;
      color: #6b7280;
      margin-bottom: 1.2rem;
    }

    .cta-card {
      margin-top: 1.75rem;
      padding: 1rem 1.25rem;
      border-radius: 16px;
      border: 1px solid rgba(15, 23, 42, 0.08);
      background: linear-gradient(135deg, #e8f1ff, #ffffff);
      box-shadow: 0 12px 24px rgba(15, 23, 42, 0.06);
    }

    .cta-card p {
      margin: 0 0 0.75rem;
      color: #0f172a;
      font-weight: 600;
    }

    .cta-card .btn {
      font-weight: 700;
      border-radius: 999px;
      padding-left: 1.25rem;
      padding-right: 1.25rem;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 0.75rem;
    }

    .feature-pill {
      border: 1px solid rgba(15, 23, 42, 0.08);
      border-radius: 14px;
      padding: 0.65rem 0.9rem;
      background: #fbfcfd;
      font-size: 0.92rem;
    }

    .gallery-strip {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .gallery-strip img {
      width: 76px;
      height: 76px;
      border-radius: 14px;
      object-fit: cover;
      border: 1px solid #e5e7eb;
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
    }

    .info-table td {
      padding: 0.35rem 0.25rem;
      border-bottom: 1px solid #f1f5f9;
      font-size: 0.95rem;
    }

    .info-table td:first-child {
      font-weight: 600;
      color: #475569;
      width: 45%;
    }
  </style>

  <section class="hero-wrap">
    <div class="container">
      <div class="hero-grid">
        <div>
          <div class="hero-gallery">
            {{#if listPost.PhotoFile}}
              <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  {{#each (split listPost.PhotoFile ',')}}
                    {{#if this}}
                    <div class="carousel-item">
                      <img src="{{photoUrl this}}" alt="Property image">
                    </div>
                    {{/if}}
                  {{/each}}
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>
              <div class="hero-thumbs">
                {{#each (split listPost.PhotoFile ',')}}
                  {{#if this}}
                  <img src="{{photoUrl this}}" alt="Property thumbnail">
                  {{/if}}
                {{/each}}
              </div>
            {{else if listPost.PhotoURL}}
              <img src="{{listPost.PhotoURL}}" class="w-100 rounded-4" style="max-height:420px;object-fit:cover;" alt="Property image">
            {{else}}
              <img src="/public/images/bg_1.jpg" class="w-100 rounded-4" style="max-height:420px;object-fit:cover;" alt="Property placeholder">
            {{/if}}
          </div>
        </div>
        <div class="hero-info">
          <h1>{{sanitize listPost.Title}}</h1>
          <p class="mb-2">{{sanitize listPost.PropertyAddress}}</p>
          <p class="fs-5 fw-semibold">${{formatCurrency listPost.AskingPrice}}</p>
          {{#if listPost.ARV}}
            <p class="text-muted mb-2">ARV: ${{formatCurrency listPost.ARV}}</p>
          {{/if}}
          <div class="hero-pill-group">
            <span class="hero-pill">{{listPost.Bedrooms}} Beds</span>
            <span class="hero-pill">{{listPost.Bathrooms}} Baths</span>
            <span class="hero-pill">{{#if listPost.SquareFootage}}{{formatCurrency listPost.SquareFootage}} sqft{{else}}Sqft N/A{{/if}}</span>
            <span class="hero-pill">Lot: {{#if listPost.LotArea}}{{formatCurrency listPost.LotArea}}{{else}}N/A{{/if}}</span>
          </div>
          {{#if listPost.PhotoURL}}
          <a class="btn btn-outline-dark mt-3" href="{{listPost.PhotoURL}}" target="_blank" rel="noopener">Open External Media</a>
          {{/if}}
          <div class="cta-card">
            <p>Want a walkthrough or numbers breakdown?</p>
            <div class="d-flex flex-wrap gap-2">
              <a class="btn btn-dark" href="mailto:info@nickhousebuyer.com?subject=Listing%20{{listPost.listingId}}%20Call">Book a Call</a>
              <a class="btn btn-outline-primary" href="mailto:info@nickhousebuyer.com?subject=Listing%20{{listPost.listingId}}%20Packet">Request Deal Packet</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main class="container property-body">
    <div class="row g-4 align-items-start">
      <div class="col-lg-6">
        <article class="property-card">
          <h3>Overview</h3>
          <p>{{#if listPost.Description}}{{sanitize listPost.Description}}{{else}}No description provided.{{/if}}</p>
        </article>
      </div>

      <div class="col-lg-6">
        <article class="property-card">
          <h3>Summary</h3>
          <table class="info-table">
            <tr><td>Listing ID</td><td>{{listPost.listingId}}</td></tr>
            <tr><td>Status</td><td>{{#if listPost.Available}}Available{{else}}Pending{{/if}}</td></tr>
            {{#if listPost.ARV}}<tr><td>ARV</td><td>${{formatCurrency listPost.ARV}}</td></tr>{{/if}}
            <tr><td>Reason for selling</td><td>{{#if listPost.ReasonForSelling}}{{sanitize listPost.ReasonForSelling}}{{else}}Not provided{{/if}}</td></tr>
            <tr><td>Updated</td><td>{{formatDate listPost.UpdatedAt}}</td></tr>
          </table>
        </article>
      </div>
    </div>

    <div class="row g-4">
      <div class="col-12">
        <article class="property-card">
          <h3>Comparable Sales</h3>
          <div class="comps-list">
            {{#if listPost.Comps1}}<p>{{sanitize listPost.Comps1}}</p>{{/if}}
            {{#if listPost.Comps2}}<p>{{sanitize listPost.Comps2}}</p>{{/if}}
            {{#if listPost.Comps3}}<p>{{sanitize listPost.Comps3}}</p>{{/if}}
            {{#unless listPost.Comps1}}
              {{#unless listPost.Comps2}}
                {{#unless listPost.Comps3}}
                  <p>No comparable sales provided.</p>
                {{/unless}}
              {{/unless}}
            {{/unless}}
          </div>
        </article>
      </div>
    </div>
  </main>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const heroCarousel = document.getElementById('heroCarousel');
      if (heroCarousel) {
        const items = heroCarousel.querySelectorAll('.carousel-item');
        const thumbs = document.querySelectorAll('.hero-thumbs img');
        items.forEach((item, idx) => item.classList.remove('active'));
        if (items.length) items[0].classList.add('active');
        thumbs.forEach((thumb, idx) => {
          thumb.setAttribute('data-bs-target', '#heroCarousel');
          thumb.setAttribute('data-bs-slide-to', String(idx));
        });
      }
    });
  </script>
</body>
